<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>АвтоМир - Мои заказы</title>
    <link rel="stylesheet" th:href="@{/style.css}">
</head>
<body>
<header>
    <header>
        <h1>АвтоМир</h1>
    </header>
    <main>
        <div class="orders-container">
            <h2>Мои заказы</h2>

            <!-- Сообщение об ошибке -->
            <div th:if="${errorMessage}" class="error-message" th:text="${errorMessage}"></div>

            <!-- Проверка, есть ли заказы -->
            <div th:if="${orders == null || orders.empty}">
                <p class="no-orders-message">У вас пока нет заказов.</p>
                <div style="text-align: center; margin-top: 20px;">
                    <a th:href="@{/products}" class="btn btn-primary">Перейти к покупкам</a>
                </div>
            </div>

            <!-- Отображение заказов -->
            <div th:unless="${orders == null || orders.empty}">
                <div class="order-card" th:each="order : ${orders}">
                    <div class="order-header">
                        <div>
                            <span class="order-id">Заказ №: <span th:text="${order.id}">123</span></span>
                            <span class="order-date">(<span th:text="${#dates.format(order.orderDate, 'dd.MM.yyyy HH:mm')}">27.09.2025 19:43</span>)</span>
                        </div>
                        <div class="order-total">
                            Общая сумма: <span th:text="${#numbers.formatCurrency(order.totalAmount)}">0.00</span>
                        </div>
                    </div>
                    <div class="order-items-list">
                        <table>
                            <thead>
                            <tr>
                                <th>Товар</th>
                                <th>Количество</th>
                                <th>Цена за шт.</th>
                                <th>Сумма</th>
                            </tr>
                            </thead>
                            <tbody>
                            <!-- Итерация по товарам в заказе -->
                            <tr th:each="item : ${order.orderItems}">
                                <td th:text="${item.product.name}">Название товара</td>
                                <td th:text="${item.quantity}">1</td>
                                <td th:text="${#numbers.formatCurrency(item.product.price)}">100.00</td>
                                <td th:text="${#numbers.formatCurrency(item.product.price * item.quantity)}">100.00</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="order-status">
                        Статус: <span th:text="${order.status}">В обработке</span>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <p>&copy; 2023 АвтоМир.</p>
</footer>
</body>
</html>